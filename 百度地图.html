<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="liushuai" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<title>练习百度地图</title>
<style>
#box{ width:500px; height:300px; margin:0 auto; border:1px solid red; }
</style>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=EAc9690e060a06cfe50a260d491afd15"></script>
<script>
window.onload=function (){
	var oT=document.getElementById('txt');
	var oBtn=document.getElementById('btn1');

	navigator.geolocation.watchPosition(function (ev){
		var longitude=ev.coords.longitude;
		var latitude=ev.coords.latitude;
		//创建地图
		var map=new BMap.Map('box');
		//位置 	缩放
		point=new BMap.Point(longitude, latitude)
		map.centerAndZoom(point, 15);
		//添加标注点
		var marker=new BMap.Marker(point);
		map.addOverlay(marker);
		
		var local = new BMap.LocalSearch(map, {
		  renderOptions:{map: map, autoViewport:true}
		});
		oBtn.onclick=function (){
			local.searchNearby(oT.value,'中国');
		};
	},function (){
		alert('获取失败');
	});
	
};
</script>
</head>

<body>
	<div id="box"></div>
    
    <input type="text" value="" id="txt" />
    <input type="button" value="搜索周边" id="btn1" />
</body>
</html>



















